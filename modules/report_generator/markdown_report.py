import os

def generate_report(target_ip, nmap_output, nuclei_output, msf_results, post_exploit_notes):
    os.makedirs("reports", exist_ok=True)
    report_file = "reports/attack_report.md"

    with open(report_file, "w") as f:
        f.write(f"# ğŸ›¡ï¸ AutoPwn Framework Report\n")
        f.write(f"**Target IP:** `{target_ip}`\n\n")
        
        f.write("## ğŸ” Phase 1: Nmap Scan Results\n")
        f.write("```\n")
        f.write(nmap_output.strip() + "\n")
        f.write("```\n\n")

        f.write("## ğŸ§ª Phase 2: Nuclei Scan Results\n")
        f.write("```\n")
        f.write(nuclei_output.strip() + "\n")
        f.write("```\n\n")

        f.write("## ğŸ’£ Phase 3: Exploitation Summary\n")
        f.write("```\n")
        f.write(msf_results.strip() + "\n")
        f.write("```\n\n")

        f.write("## ğŸ”“ Phase 4: Post-Exploitation Notes\n")
        f.write("```\n")
        f.write(post_exploit_notes.strip() + "\n")
        f.write("```\n\n")

        f.write("---\n")
        f.write("âœ… **Report generated by AutoPwn Framework**\n")

    print(f"[+] Report generated: {report_file}")


